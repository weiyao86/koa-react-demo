{"version":3,"sources":["webpack:///./components/globalContext.js","webpack:///./router/lazyMoudle.js","webpack:///./views/layout/index.js","webpack:///./components/breadCrumbs.js","webpack:///external \"jQuery\"","webpack:///./models/global.js","webpack:///./models/index.js","webpack:///./router/index.js","webpack:///./app.js"],"names":["GlobalData","theme","onChangeGlobal","GlobalContext","React","createContext","window","AppInstance","modelsCache","asyncComponent","cmp","connect","state","props","component","model","cmpMethod","this","globalModel","entry","models","Promise","all","then","arr","c","m","forEach","item","itemDefault","default","prototype","Component","push","namespace","setState","catch","err","console","log","C","SubMenu","Menu","Header","Layout","Content","Sider","Class","withRouter","reduce","prev","isArray","Array","routes","concat","flattenRouters","menu","map","key","path","title","type","initDynamicMenu","Item","to","route","exact","strict","render","className","nextRoute","temp","initSetRoute","routerConfig","app","history","breadcrumbs","getBreadcrumbs","location","curRouterConfig","setRouter","curRoute","matchRoutes","pathname","stKey","Provider","value","mode","defaultSelectedKeys","width","collapsible","style","height","borderRight","selectedKeys","onClick","keyPath","domEvent","search","padding","margin","itemRender","params","paths","indexOf","length","breadcrumbName","minHeight","getBreadcrumb","cur","pathSection","matchRoute","find","ele","Error","matchPath","routers","matchs","router","split","breadcrumb","module","exports","jQuery","stateName","reducers","set","payload","reset","effects","getGlobalData","call","put","select","r","j","setTimeout","LazyMoudle","createHistory","dva","initialState","test","App","start","ReactDom","document","getElementById"],"mappings":"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","file":"chunk/js/main.js","sourcesContent":["export  const GlobalData={\r\n    theme:'dark',\r\n    onChangeGlobal:()=>{}\r\n}\r\n\r\nexport const GlobalContext=React.createContext(GlobalData);","// import { Spin } from 'antd';\r\nimport { connect } from 'dva';\r\n\r\nconst appInstance = window.AppInstance;\r\nconst modelsCache = {};\r\n//the model only load once\r\nconst registerModel = (model) => {\r\n  if (model.namespace && !modelsCache[model.namespace]) {\r\n    window.AppInstance.model(model);\r\n    modelsCache[model.namespace] = 1;\r\n  }\r\n};\r\n\r\nexport default function asyncComponent(cmp) {\r\n  @connect((state) => state)\r\n  class AsyncCmp extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {\r\n        component: null,\r\n        model: null,\r\n      };\r\n    }\r\n\r\n    componentDidMount() {\r\n      const { globalModel } = this.props;\r\n      const cmpMethod = cmp();\r\n\r\n      // 返回异步组件及model\r\n      const { entry = null, models = [] } = cmpMethod;\r\n\r\n      Promise.all([entry, ...models])\r\n        .then((arr) => {\r\n          let c = {};\r\n          let m = [];\r\n          arr.forEach((item) => {\r\n            let itemDefault = item && item.default;\r\n            if (itemDefault && itemDefault.prototype instanceof React.Component) {\r\n              c = itemDefault;\r\n            } else {\r\n              m.push(itemDefault);\r\n            }\r\n          });\r\n\r\n          if (m) {\r\n            m.forEach((item) => {\r\n              registerModel(item);\r\n            });\r\n          }\r\n          this.setState({\r\n            component: c,\r\n            model: m,\r\n          });\r\n        })\r\n        .catch(err => {\r\n          console.log('catch',err);\r\n        });\r\n    }\r\n\r\n    render() {\r\n      const C = this.state.component;\r\n      return C ? <C {...this.props} /> : <div>Loading...</div>;\r\n    }\r\n  }\r\n\r\n  return AsyncCmp;\r\n}\r\n","import { Switch, Route, withRouter, Link } from 'dva/router';\r\nimport {matchRoutes} from 'react-router-config';\r\nimport { TransitionGroup, CSSTransition } from 'react-transition-group';\r\nimport {Layout, Menu, Breadcrumb, Icon} from 'antd';\r\nimport {getBreadcrumbs} from '@/components/breadCrumbs';\r\nimport {GlobalContext,GlobalData} from '@/components/globalContext';\r\nimport './style.less';\r\n\r\nconst {SubMenu} = Menu;\r\nconst {Header, Content, Sider} = Layout;\r\nconst ANIMATION_MAP = {\r\n  PUSH: 'forward',\r\n  POP: 'back',\r\n};\r\n\r\n@withRouter\r\nclass Class extends React.Component {\r\n  flattenRouters = (arr) =>\r\n    arr.reduce((prev, item) => {\r\n      const isArray = Array.isArray(item.routes);\r\n      prev.push(item);\r\n      return isArray ? prev.concat(flattenRouters(item.routes)) : prev;\r\n    }, []);\r\n\r\n  routeWithSubRoutes(route) {\r\n    // <Route component>：在地址匹配的时候React的组件才会被渲染，route props也会随着一起被渲染；\r\n\r\n    // <Route render>：这种方式对于内联渲染和包装组件却不引起意料之外的重新挂载特别方便；\r\n\r\n    // <Route children>：与render属性的工作方式基本一样，除了它是不管地址匹配与否都会被调用；\r\n\r\n    return (\r\n      <Route\r\n        key={route.path}\r\n        path={route.path}\r\n        exact={route.exact}\r\n        strict={route.strict}\r\n        // children={(props) =><route.component {...props} routes={route.routes} className='fade' />}\r\n        render={(props) => (route.render ? route.render({ ...props, route }) : <route.component {...props} routes={route.routes} className='fade' />)}\r\n      />\r\n    );\r\n  }\r\n\r\n  initSetRoute(routes) {\r\n    let arr = [];\r\n    if (Array.isArray(routes)) {\r\n      routes.forEach((item) => {\r\n        const nextRoute = Array.isArray(item.routes) ? item.routes : item;\r\n        const temp = this.initSetRoute(nextRoute);\r\n        arr = [...arr, ...temp];\r\n      });\r\n    } else {\r\n      arr.push(<Route\r\n        path={routes.path}\r\n        key={routes.path}\r\n        exact={routes.exact}\r\n        strict={routes.strict}\r\n        render={props => (routes.render ? routes.render({...props, routes}) : <routes.component {...props} routes={routes} />)}\r\n      />);\r\n    }\r\n    return arr;\r\n  }\r\n  initDynamicMenu=(routes) => {\r\n    let menu = [];\r\n    routes.map((item) => {\r\n      if (Array.isArray(item.routes)) {\r\n        const m = (<SubMenu\r\n          key={item.path}\r\n          title={\r\n            <span>\r\n              <Icon type=\"user\" />\r\n              <span>{item.title}</span>\r\n            </span>\r\n          }\r\n        >\r\n          {this.initDynamicMenu(item.routes)}\r\n        </SubMenu>);\r\n        menu = [...menu, m];\r\n      } else {\r\n        menu.push(<Menu.Item key={item.path} to={item.path}>{item.title}</Menu.Item>);\r\n      }\r\n      return [];\r\n    });\r\n\r\n    return menu;\r\n  }\r\n\r\n  render() {\r\n    const { app, routerConfig, history } = this.props;\r\n\r\n     // 面包屑\r\n     this.breadcrumbs = getBreadcrumbs(routerConfig, this.props.location);\r\n    \r\n     // 菜单重组\r\n    const curRouterConfig = this.flattenRouters(routerConfig);\r\n\r\n     // 递归设置路由\r\n    const setRouter = this.initSetRoute(routerConfig);\r\n\r\n    // 加载菜单\r\n    const menu = this.initDynamicMenu(routerConfig);\r\n\r\n     // 加入递归查询\r\n     const curRoute = matchRoutes(curRouterConfig, this.props.location.pathname);\r\n     // 设置当前选中菜单\r\n     const stKey = curRoute[0] && curRoute[0].route.path || '/';\r\n\r\n    // return (\r\n    //   <div className='layout-main'>\r\n    //     <TransitionGroup className='todo-list' childFactory={(child) => React.cloneElement(child, { classNames: history.action })}>\r\n    //       <CSSTransition in={true} timeout={300} classNames='fade' key={location.pathname} unmountOnExit>\r\n    //         <Switch>{curRouterConfig.map((route, i) => this.routeWithSubRoutes(route))}</Switch>\r\n    //       </CSSTransition>\r\n    //     </TransitionGroup>\r\n    //   </div>\r\n    // );\r\n    return (\r\n      //使用Context\r\n      <GlobalContext.Provider value={GlobalData}>\r\n      <Layout>\r\n        <Header className=\"header\">\r\n          <div className=\"logo\">Logo</div>\r\n          <Menu theme=\"dark\" mode=\"horizontal\" defaultSelectedKeys={['2']}>\r\n            <Menu.Item key=\"1\">nav 1</Menu.Item>\r\n            <Menu.Item key=\"2\">nav 2</Menu.Item>\r\n            <Menu.Item key=\"3\">nav 3</Menu.Item>\r\n          </Menu>\r\n        </Header>\r\n        <Layout>\r\n          <Sider width={200} className=\"site-layout-background\" collapsible>\r\n            <Menu\r\n              mode=\"inline\"\r\n              style={{height: '100%', borderRight: 0}}\r\n              // defaultSelectKeys={['/']}\r\n              selectedKeys={[stKey]}\r\n              onClick={(item, key, keyPath, domEvent) => {\r\n                //传参四方式\r\n                //地址栏无显示 \r\n                // this.props.history.push({pathname:item.key,query:{name:'jack',age:19}});\r\n                // this.props.history.push({pathname:item.key,state:{value:'i am the state'}});\r\n                //保留地址\r\n                this.props.history.push({pathname:item.key,search:'tttttt'});\r\n                //report/:id    \r\n              }}\r\n            >\r\n              {menu}\r\n            </Menu>\r\n          </Sider>\r\n          <Layout style={{padding: '0 24px 24px'}}>\r\n            <Breadcrumb\r\n              style={{margin: '16px 0'}}\r\n              itemRender={(route, params, routes, paths) => {\r\n                const last = routes.indexOf(route) === routes.length - 1;\r\n                return last ? (\r\n                  <span>{route.breadcrumbName}</span>\r\n                ) : (\r\n                  <Link to={route.path}>\r\n                    {route.path === '/' && <Icon type=\"home\" />}\r\n                    {route.breadcrumbName}\r\n                  </Link>\r\n                );\r\n              }}\r\n              routes={this.breadcrumbs}\r\n            />\r\n\r\n            <Content\r\n              className=\"site-layout-background\"\r\n              style={{\r\n                padding: 24,\r\n                margin: 0,\r\n                minHeight: 280,\r\n              }}\r\n            >\r\n              <Switch>\r\n                {setRouter}\r\n              </Switch>\r\n            </Content>\r\n          </Layout>\r\n        </Layout>\r\n      </Layout>\r\n      </GlobalContext.Provider>\r\n    );\r\n  }\r\n}\r\nexport default Class;\r\n","import { matchPath } from \"dva/router\";\r\n\r\n/**\r\n * \r\n * @param {arr} arr 路由配置数组\r\n * @return 路由扁平化数组\r\n */\r\nconst flattenRouters = arr => arr.reduce(function (prev, item) {\r\n    let isArray = Array.isArray(item.routes);\r\n    prev.push(item);\r\n    return isArray ? prev.concat(flattenRouters(item.routes)) : prev;\r\n}, []);\r\n\r\n//匹配单个路由数据\r\nconst getBreadcrumb = (flattenRouters = [], cur, pathSection) => {\r\n    const matchRoute = flattenRouters.find(ele => {\r\n        const { breadcrumbName, path } = ele;\r\n        if (!breadcrumbName || !path) {\r\n            throw new Error('Router中的每个Route必须包含`path`及`breadcrumbName`属性')\r\n        }\r\n        return matchPath(pathSection, { path, exact: true });\r\n    })\r\n    if (matchRoute) {\r\n        return {\r\n            path: matchRoute.path,\r\n            breadcrumbName: matchRoute.breadcrumbName || cur\r\n        }\r\n    }\r\n    return {\r\n        path: '',\r\n        breadcrumbName: ''\r\n    }\r\n}\r\n\r\nexport const getBreadcrumbs = (routers = [], location) => {\r\n    let matchs =[];\r\n    //  [{\r\n    //     path: '/',\r\n    //     breadcrumbName: '首页'\r\n    // }];\r\n\r\n    const router = flattenRouters(routers);\r\n\r\n    location.pathname.split('?')[0].split('/').reduce((prev, cur) => {\r\n        const pathSection = `${prev}/${cur}`;\r\n        const breadcrumb = getBreadcrumb(router, cur, pathSection);\r\n        matchs.push(breadcrumb);\r\n        return pathSection;\r\n    });\r\n\r\n    return matchs;\r\n\r\n}","module.exports = jQuery;","\r\n/**\r\n * global model\r\n */\r\nconst model = {\r\n  namespace: 'global',\r\n  state: {\r\n    stateName: 'this is a global var'\r\n  },\r\n\r\n  //change state only there\r\n  reducers: {\r\n    set(state, { payload }) {\r\n      return { ...state, ...payload };\r\n    },\r\n\r\n    reset(state) {\r\n      return { ...state, ...model.state };\r\n    }\r\n  },\r\n\r\n  //action async\r\n  effects: {\r\n    // test data\r\n    * getGlobalData(state, { call, put, select }) {\r\n      return yield call(() => {\r\n        new Promise((r, j) => {\r\n          setTimeout(() => {\r\n            r('success');\r\n          }, 1000);\r\n        })\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nexport default model;","import Global from './global';\r\n\r\nexport default [\r\n  Global\r\n]","import LazyMoudle from './lazyMoudle';\r\n\r\nconst routerConfig = [\r\n  {\r\n    path: '/',\r\n    component: LazyMoudle(() => ({\r\n      entry: import(/* webpackChunkName: \"pagesHome\" */ '@/views/home'),\r\n      models: [import(/* webpackChunkName: \"pagesHomeModel\" */ '@/views/home/model'), import(/* webpackChunkName: \"pagesHomeModel\" */ '@/views/home/modelTest')],\r\n    })),\r\n    breadcrumbName: '首页',\r\n    title: '首页',\r\n    exact: true,\r\n  },\r\n  {\r\n    path: '/main',\r\n    component: LazyMoudle(() => ({\r\n      entry: import(/* webpackChunkName: \"pagesMain\" */ '@/views/main'),\r\n      models: [import(/* webpackChunkName: \"pagesMainModel\" */ '@/views/main/model')],\r\n    })),\r\n    breadcrumbName: 'main',\r\n    title: 'main',\r\n    exact: true, //为true时，则要求路径与location.pathname必须完全匹配\r\n    strict: true, //为true时，有结尾斜线的路径只能匹配有斜线的location.pathname\r\n  },\r\n];\r\n\r\nexport default routerConfig;\r\n","// import 'core-js/es6/set';\r\n// import 'core-js/es6/map';//core-js/es6/set  @2.x版本无问题，@3.x版本无效\r\nimport React from 'react';\r\nimport ReactDom from 'react-dom';\r\nimport dva from 'dva';\r\nimport { StaticRouter, BrowserRouter } from 'dva/router';\r\nimport createHistory from 'history/createBrowserHistory';\r\nimport models from '@/models/index';\r\nimport routerConfig from '@/router';\r\nimport Layout from './views/layout';\r\nimport $ from 'jquery'; //测试外部externals\r\nimport './resource/style/index.css';\r\nimport './resource/style/index.scss';\r\nimport './resource/style/index.less';\r\nimport './resource/style/frame.less';\r\n\r\nconst history = createHistory();\r\nconst app = dva({\r\n  initialState: 'globalState',\r\n  history,\r\n});\r\n\r\n// 2. Plugins\r\n// app.use({});\r\n\r\n// 3.use.model\r\nmodels.forEach((model) => {\r\n  if (model.namespace == 'global') {\r\n    model.state = { ...model.state, ...{ test: 'testName' } };\r\n  }\r\n  app.model(model);\r\n});\r\n\r\nwindow.AppInstance = app;\r\n\r\n// 4.Router\r\n\r\napp.router((props) => (\r\n  <BrowserRouter>\r\n      <Layout app={props.app} routerConfig={routerConfig}></Layout>\r\n  </BrowserRouter>\r\n));\r\n\r\n// 5.start\r\n\r\nconst App = app.start();\r\n\r\nReactDom.render(<App />, document.getElementById('app'));\r\n\r\n//配置热更新模块，无刷新[需配置devServer]\r\n// if (module.hot) {\r\n//   module.hot.accept('./demo.js', function () {\r\n//     console.log('module.hot.accept')\r\n//   })\r\n//   module.hot.accept('./index.js', function () {\r\n//     console.log('module.hot.accept.index')\r\n//   })\r\n// }\r\n"],"sourceRoot":""}